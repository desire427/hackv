<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recherche - PharmaConnect</title> 
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .medication-card:hover {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }

        .availability-badge {
            position: absolute;
            top: 10px;
            right: 10px;
        }

        .map-container {
            height: 400px;
            border-radius: 10px;
            overflow: hidden;
        }
    </style>
</head>
<body class="font-sans bg-gray-50">
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-blue-800 shadow-lg sticky-top">
        <div class="container">
            <a class="navbar-brand flex items-center" href="accueil-patient.html">
                <i class="fas fa-prescription-bottle-alt text-2xl mr-2"></i>
                <span class="text-xl font-bold">PharmaConnect</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="index.html">Accueil</a></li>
                    <li class="nav-item"><a class="nav-link active" href="recherche.html">Recherche</a></li>
                    <li class="nav-item"><a class="nav-link" href="pharmacies.html">Pharmacies</a></li>
                    <li class="nav-item"><a class="nav-link" href="ordonnance.html">Ordonnance</a></li>
                    <li class="nav-item"><a class="nav-link" href="connexion.html">Connexion</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Search Section -->
    <section class="py-8 bg-white shadow-sm">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-8 mb-4 mb-md-0">
                    <h1 class="text-2xl font-bold mb-2">Résultats de recherche</h1>
                    <p class="text-gray-600">12 pharmacies disponibles dans un rayon de 5km</p>
                </div>
                <div class="col-md-4">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Nouvelle recherche...">
                        <button class="btn btn-primary" type="button">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <section class="py-8">
        <div class="container">
            <div class="row">
                <!-- Filters Sidebar -->
                <div class="col-lg-3 mb-5 mb-lg-0">
                    <div class="card border-0 shadow-sm">
                        <div class="card-body">
                            <h3 class="font-bold text-lg mb-4">Filtres</h3>

                            <div class="mb-4">
                                <h4 class="font-bold mb-2">Distance</h4>
                                <select class="form-select">
                                    <option>5 km</option>
                                    <option selected>10 km</option>
                                    <option>20 km</option>
                                    <option>50 km</option>
                                </select>
                            </div>

                            <div class="mb-4">
                                <h4 class="font-bold mb-2">Disponibilité</h4>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="inStock" checked>
                                    <label class="form-check-label" for="inStock">En stock</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="lowStock">
                                    <label class="form-check-label" for="lowStock">Stock faible</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="reservable">
                                    <label class="form-check-label" for="reservable">Réservable en ligne</label>
                                </div>
                            </div>

                            <div class="mb-4">
                                <h4 class="font-bold mb-2">Horaires</h4>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="openNow" checked>
                                    <label class="form-check-label" for="openNow">Ouvert maintenant</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="weekend">
                                    <label class="form-check-label" for="weekend">Ouvert le week-end</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="night">
                                    <label class="form-check-label" for="night">Pharmacie de garde</label>
                                </div>
                            </div>

                            <button class="btn btn-primary w-100">Appliquer les filtres</button>
                        </div>
                    </div>

                    <div class="card border-0 shadow-sm mt-4">
                        <div class="card-body">
                            <h3 class="font-bold text-lg mb-4">Médicaments disponibles</h3>
                            <div class="d-flex">
                                <img src="https://via.placeholder.com/80" alt="Doliprane" class="rounded me-3" width="80" height="80">
                                <div>
                                    <h4 class="font-bold">Doliprane 1000mg</h4>
                                    <p class="text-sm text-gray-600">Boîte de 8 comprimés</p>
                                    <p class="text-sm">Paracétamol</p>
                                </div>
                            </div>
                            <hr class="my-3">
                            <div class="text-sm">
                                <p class="font-bold">Posologie habituelle :</p>
                                <p>1 comprimé à prendre avec un verre d'eau, à renouveler au bout de 6 à 8 heures.</p>
                                <p class="mt-2 text-red-500"><i class="fas fa-exclamation-triangle me-2"></i>Ne pas dépasser 3g par jour.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Results -->
                <div class="col-lg-9">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <div>
                            <span class="text-gray-600">Trier par :</span>
                            <div class="btn-group ms-2">
                                <button class="btn btn-outline-secondary btn-sm dropdown-toggle" type="button" data-bs-toggle="dropdown">
                                    Plus proche
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a class="dropdown-item" href="#">Plus proche</a></li>
                                    <li><a class="dropdown-item" href="#">Prix croissant</a></li>
                                    <li><a class="dropdown-item" href="#">Prix décroissant</a></li>
                                    <li><a class="dropdown-item" href="#">Meilleures notes</a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="btn-group" role="group">
                            <button type="button" class="btn btn-outline-secondary btn-sm active">
                                <i class="fas fa-list"></i>
                            </button>
                            <button type="button" class="btn btn-outline-secondary btn-sm">
                                <i class="fas fa-map-marker-alt"></i> Carte
                            </button>
                        </div>
                    </div>

                    <!-- Cart Section -->
                    <div class="card border-0 shadow-sm mb-4">
                        <div class="card-body">
                            <h3 class="font-bold text-lg mb-4">Votre Panier</h3>
                            <div id="cartItems">
                                <!-- Cart items will be added here dynamically -->
                            </div>
                            <div class="d-flex justify-content-between align-items-center mt-4">
                                <h4 class="font-bold">Total: <span id="cartTotal">0</span> FCFA</h4>
                                <button id="makeReservation" class="btn btn-primary">Faire une réservation</button>
                            </div>
                        </div>
                    </div>

                    <!-- Pharmacy Results -->
                    <div class="card border-0 shadow-sm mb-4 medication-card">
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-8">
                                    <div class="d-flex align-items-start">
                                        <img src="https://via.placeholder.com/100" alt="Pharmacie" class="rounded me-4" width="100" height="100">
                                        <div>
                                            <h3 class="font-bold text-xl mb-1">Pharmacie Centrale</h3>
                                            <div class="text-yellow-400 mb-2">
                                                <i class="fas fa-star"></i>
                                                <i class="fas fa-star"></i>
                                                <i class="fas fa-star"></i>
                                                <i class="fas fa-star"></i>
                                                <i class="fas fa-star-half-alt"></i>
                                                <span class="text-gray-600 text-sm ms-2">(124 avis)</span>
                                            </div>
                                            <p class="text-gray-600 mb-2"><i class="fas fa-map-marker-alt me-2"></i> 15 Rue de la République, 75001 Paris</p>
                                            <p class="text-gray-600 mb-2"><i class="fas fa-phone me-2"></i> 01 23 45 67 89</p>
                                            <div class="d-flex flex-wrap gap-2 mt-2">
                                                <span class="badge bg-success"><i class="fas fa-check-circle me-1"></i> Ouvert</span>
                                                <span class="badge bg-info text-dark"><i class="fas fa-clock me-1"></i> Ferme à 20h</span>
                                                <span class="badge bg-primary"><i class="fas fa-calendar-check me-1"></i> Réservation en ligne</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="d-flex flex-column h-100 justify-content-between">
                                        <div class="text-end">
                                            <span class="availability-badge badge bg-success">En stock (12)</span>
                                            <h4 class="text-2xl font-bold text-blue-600 mt-2">5,99 €</h4>
                                            <p class="text-gray-600">Prix conseillé : 6,20 €</p>
                                        </div>
                                        <div class="d-grid gap-2">
                                            <button class="btn btn-primary reserve-btn" data-pharmacy="Pharmacie Centrale" data-price="3933.6" data-product="Doliprane 1000mg">
                                                <i class="fas fa-shopping-cart me-2"></i> Réserver
                                            </button>
                                            <button class="btn btn-outline-primary">
                                                <i class="fas fa-directions me-2"></i> Itinéraire
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- More pharmacy results... -->
                    <div class="card border-0 shadow-sm mb-4 medication-card">
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-8">
                                    <div class="d-flex align-items-start">
                                        <img src="https://via.placeholder.com/100" alt="Pharmacie" class="rounded me-4" width="100" height="100">
                                        <div>
                                            <h3 class="font-bold text-xl mb-1">Pharmacie du Nord</h3>
                                            <div class="text-yellow-400 mb-2">
                                                <i class="fas fa-star"></i>
                                                <i class="fas fa-star"></i>
                                                <i class="fas fa-star"></i>
                                                <i class="fas fa-star"></i>
                                                <i class="far fa-star"></i>
                                                <span class="text-gray-600 text-sm ms-2">(87 avis)</span>
                                            </div>
                                            <p class="text-gray-600 mb-2"><i class="fas fa-map-marker-alt me-2"></i> 28 Boulevard de la Villette, 75019 Paris</p>
                                            <p class="text-gray-600 mb-2"><i class="fas fa-phone me-2"></i> 01 87 65 43 21</p>
                                            <div class="d-flex flex-wrap gap-2 mt-2">
                                                <span class="badge bg-success"><i class="fas fa-check-circle me-1"></i> Ouvert</span>
                                                <span class="badge bg-info text-dark"><i class="fas fa-clock me-1"></i> Ferme à 19h30</span>
                                                <span class="badge bg-warning text-dark"><i class="fas fa-exclamation-triangle me-1"></i> Stock faible (2)</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="d-flex flex-column h-100 justify-content-between">
                                        <div class="text-end">
                                            <span class="availability-badge badge bg-warning text-dark">Stock faible (2)</span>
                                            <h4 class="text-2xl font-bold text-blue-600 mt-2">5,85 €</h4>
                                            <p class="text-gray-600">Prix conseillé : 6,20 €</p>
                                        </div>
                                        <div class="d-grid gap-2">
                                            <button class="btn btn-primary reserve-btn" data-pharmacy="Pharmacie du Nord" data-price="3843.3" data-product="Doliprane 1000mg">
                                                <i class="fas fa-shopping-cart me-2"></i> Réserver
                                            </button>
                                            <button class="btn btn-outline-primary">
                                                <i class="fas fa-directions me-2"></i> Itinéraire
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card border-0 shadow-sm mb-4 medication-card">
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-8">
                                    <div class="d-flex align-items-start">
                                        <img src="https://via.placeholder.com/100" alt="Pharmacie" class="rounded me-4" width="100" height="100">
                                        <div>
                                            <h3 class="font-bold text-xl mb-1">Pharmacie Lafayette</h3>
                                            <div class="text-yellow-400 mb-2">
                                                <i class="fas fa-star"></i>
                                                <i class="fas fa-star"></i>
                                                <i class="fas fa-star"></i>
                                                <i class="fas fa-star"></i>
                                                <i class="fas fa-star"></i>
                                                <span class="text-gray-600 text-sm ms-2">(215 avis)</span>
                                            </div>
                                            <p class="text-gray-600 mb-2"><i class="fas fa-map-marker-alt me-2"></i> 42 Rue Lafayette, 75009 Paris</p>
                                            <p class="text-gray-600 mb-2"><i class="fas fa-phone me-2"></i> 01 32 54 76 98</p>
                                            <div class="d-flex flex-wrap gap-2 mt-2">
                                                <span class="badge bg-success"><i class="fas fa-check-circle me-1"></i> Ouvert</span>
                                                <span class="badge bg-info text-dark"><i class="fas fa-clock me-1"></i> Ferme à 21h</span>
                                                <span class="badge bg-primary"><i class="fas fa-calendar-check me-1"></i> Réservation en ligne</span>
                                                <span class="badge bg-danger"><i class="fas fa-plus-circle me-1"></i> Urgences</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="d-flex flex-column h-100 justify-content-between">
                                        <div class="text-end">
                                            <span class="availability-badge badge bg-success">En stock (8)</span>
                                            <h4 class="text-2xl font-bold text-blue-600 mt-2">6,20 €</h4>
                                            <p class="text-gray-600">Prix conseillé : 6,20 €</p>
                                        </div>
                                        <div class="d-grid gap-2">
                                            <button class="btn btn-primary reserve-btn" data-pharmacy="Pharmacie Lafayette" data-price="4068" data-product="Doliprane 1000mg">
                                                <i class="fas fa-shopping-cart me-2"></i> Réserver
                                            </button>
                                            <button class="btn btn-outline-primary">
                                                <i class="fas fa-directions me-2"></i> Itinéraire
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Ajoutez ce bloc de carte pour la pharmacie de Grand Yoff -->
                    <div class="card border-0 shadow-sm mb-4 medication-card">
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-8">
                                    <div class="d-flex align-items-start">
                                        <img src="https://via.placeholder.com/100" alt="Pharmacie de Grand Yoff" class="rounded me-4" width="100" height="100">
                                        <div>
                                            <h3 class="font-bold text-xl mb-1">Pharmacie de Grand Yoff</h3>
                                            <div class="text-yellow-400 mb-2">
                                                <i class="fas fa-star"></i>
                                                <i class="fas fa-star"></i>
                                                <i class="fas fa-star"></i>
                                                <i class="fas fa-star"></i>
                                                <i class="fas fa-star-half-alt"></i>
                                                <span class="text-gray-600 text-sm ms-2">(98 avis)</span>
                                            </div>
                                            <p class="text-gray-600 mb-2"><i class="fas fa-map-marker-alt me-2"></i> Rue de Grand Yoff, Dakar, Sénégal</p>
                                            <p class="text-gray-600 mb-2"><i class="fas fa-phone me-2"></i> +221 33 824 12 34</p>
                                            <div class="d-flex flex-wrap gap-2 mt-2">
                                                <span class="badge bg-success"><i class="fas fa-check-circle me-1"></i> Ouvert</span>
                                                <span class="badge bg-info text-dark"><i class="fas fa-clock me-1"></i> Ferme à 22h</span>
                                                <span class="badge bg-primary"><i class="fas fa-calendar-check me-1"></i> Réservation en ligne</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="d-flex flex-column h-100 justify-content-between">
                                        <div class="text-end">
                                            <span class="availability-badge badge bg-success">En stock (15)</span>
                                            <h4 class="text-2xl font-bold text-blue-600 mt-2">5,75 €</h4>
                                            <p class="text-gray-600">Prix conseillé : 6,00 €</p>
                                        </div>
                                        <div class="d-grid gap-2">
                                            <button class="btn btn-primary reserve-btn" data-pharmacy="Pharmacie de Grand Yoff" data-price="3772.5" data-product="Doliprane 1000mg">
                                                <i class="fas fa-shopping-cart me-2"></i> Réserver
                                            </button>
                                            <button class="btn btn-outline-primary">
                                                <i class="fas fa-directions me-2"></i> Itinéraire
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Map View (hidden by default) -->
                    <div class="card border-0 shadow-sm mb-4 d-none">
                        <div class="card-body p-0">
                            <div class="map-container">
                                <!-- This would be replaced with an actual map implementation -->
                                <img src="https://maps.googleapis.com/maps/api/staticmap?center=Paris&zoom=12&size=800x400&maptype=roadmap&markers=color:red%7C48.8566,2.3522&key=YOUR_API_KEY"
                                     alt="Map" class="w-100 h-100 object-cover">
                            </div>
                        </div>
                    </div>

                    <!-- Pagination -->
                    <nav aria-label="Page navigation">
                        <ul class="pagination justify-content-center">
                            <li class="page-item disabled">
                                <a class="page-link" href="#" tabindex="-1">Précédent</a>
                            </li>
                            <li class="page-item active"><a class="page-link" href="#">1</a></li>
                            <li class="page-item"><a class="page-link" href="#">2</a></li>
                            <li class="page-item"><a class="page-link" href="#">3</a></li>
                            <li class="page-item">
                                <a class="page-link" href="#">Suivant</a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-8">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 mb-4">
                    <h3 class="text-xl font-bold mb-2 flex items-center">
                        <i class="fas fa-prescription-bottle-alt text-2xl mr-2"></i>
                        <span class="text-xl font-bold">PharmaConnect</span>
                    </h3>
                    <p class="text-gray-400">La solution intelligente pour un accès simplifié aux médicaments.</p>
                    <div class="mt-4">
                        <a href="#" class="text-gray-400 hover:text-white me-3"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white me-3"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white me-3"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>

                <div class="col-lg-2 col-md-4 mb-4">
                    <h4 class="font-bold mb-4">Navigation</h4>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="index.html" class="text-gray-400 hover:text-white">Accueil</a></li>
                        <li class="mb-2"><a href="recherche.html" class="text-gray-400 hover:text-white">Recherche</a></li>
                        <li class="mb-2"><a href="pharmacies.html" class="text-gray-400 hover:text-white">Pharmacies</a></li>
                        <li class="mb-2"><a href="ordonnance.html" class="text-gray-400 hover:text-white">Ordonnance</a></li>
                        <li class="mb-2"><a href="connexion.html" class="text-gray-400 hover:text-white">Connexion</a></li>
                    </ul>
                </div>

                <div class="col-lg-3 col-md-4 mb-4">
                    <h4 class="font-bold mb-4">Liens utiles</h4>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="#" class="text-gray-400 hover:text-white">FAQ</a></li>
                        <li class="mb-2"><a href="#" class="text-gray-400 hover:text-white">Mentions légales</a></li>
                        <li class="mb-2"><a href="#" class="text-gray-400 hover:text-white">Politique de confidentialité</a></li>
                        <li class="mb-2"><a href="#" class="text-gray-400 hover:text-white">Conditions d'utilisation</a></li>
                    </ul>
                </div>

                <div class="col-lg-3 col-md-4 mb-4">
                    <h4 class="font-bold mb-4">Contact</h4>
                    <ul class="list-unstyled text-gray-400">
                        <li class="mb-2"><i class="fas fa-map-marker-alt me-2"></i> 123 Rue de la Santé, Paris</li>
                        <li class="mb-2"><i class="fas fa-phone me-2"></i> +33 1 23 45 67 89</li>
                        <li class="mb-2"><i class="fas fa-envelope me-2"></i> contact@pharmaconnect.fr</li>
                    </ul>
                </div>
            </div>
            <hr class="my-6 border-gray-700">

            <div class="text-center text-gray-400">
                <p>&copy; 2023 PharmaConnect. Tous droits réservés.</p>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
    // Liste de médicaments et pharmacies (exemple)
    const medications = [
        {
            name: "Doliprane 1000mg",
            description: "Boîte de 8 comprimés",
            molecule: "Paracétamol",
            posologie: "1 comprimé à prendre avec un verre d'eau, à renouveler au bout de 6 à 8 heures.",
            max: "Ne pas dépasser 3g par jour.",
            pharmacies: [
                { name: "Pharmacie Centrale", price: 3933.6, stock: 12, address: "15 Rue de la République, 75001 Paris", phone: "01 23 45 67 89", avis: 124 },
                { name: "Pharmacie du Nord", price: 3843.3, stock: 2, address: "28 Boulevard de la Villette, 75019 Paris", phone: "01 87 65 43 21", avis: 87 },
                { name: "Pharmacie Lafayette", price: 4068, stock: 8, address: "42 Rue Lafayette, 75009 Paris", phone: "01 32 54 76 98", avis: 215 },
                { name: "Pharmacie de Grand Yoff", price: 3772.5, stock: 15, address: "Rue de Grand Yoff, Dakar, Sénégal", phone: "+221 33 824 12 34", avis: 98 }
            ]
        },
        {
            name: "Efferalgan 500mg",
            description: "Boîte de 16 comprimés",
            molecule: "Paracétamol",
            posologie: "1 à 2 comprimés toutes les 4 à 6 heures.",
            max: "Ne pas dépasser 3g par jour.",
            pharmacies: [
                { name: "Pharmacie Centrale", price: 2500, stock: 10, address: "15 Rue de la République, 75001 Paris", phone: "01 23 45 67 89", avis: 124 },
                { name: "Pharmacie Lafayette", price: 2600, stock: 5, address: "42 Rue Lafayette, 75009 Paris", phone: "01 32 54 76 98", avis: 215 }
            ]
        },
        {
            name: "Ibuprofène 400mg",
            description: "Boîte de 20 comprimés",
            molecule: "Ibuprofène",
            posologie: "1 comprimé toutes les 6 à 8 heures si besoin.",
            max: "Ne pas dépasser 1200mg par jour.",
            pharmacies: [
                { name: "Pharmacie du Nord", price: 3200, stock: 7, address: "28 Boulevard de la Villette, 75019 Paris", phone: "01 87 65 43 21", avis: 87 },
                { name: "Pharmacie de Grand Yoff", price: 3150, stock: 3, address: "Rue de Grand Yoff, Dakar, Sénégal", phone: "+221 33 824 12 34", avis: 98 }
            ]
        }
        // Ajoute d'autres médicaments ici si besoin
    ];

    // Panier
    let cart = [];

    // Affichage dynamique des résultats
    function displayResults(query = "") {
        const resultsContainer = document.querySelector('.col-lg-9');
        // Supprime les anciennes cartes de médicaments
        resultsContainer.querySelectorAll('.medication-card').forEach(card => card.remove());

        medications.forEach(med => {
            // Filtre sur le nom, la molécule ou la description
            if (
                query &&
                !med.name.toLowerCase().includes(query.toLowerCase()) &&
                !med.molecule.toLowerCase().includes(query.toLowerCase()) &&
                !med.description.toLowerCase().includes(query.toLowerCase())
            ) return;

            med.pharmacies.forEach(pharm => {
                // Génère dynamiquement la carte
                const card = document.createElement('div');
                card.className = "card border-0 shadow-sm mb-4 medication-card";
                card.innerHTML = `
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-8">
                                <div class="d-flex align-items-start">
                                    <img src="https://via.placeholder.com/100" alt="${med.name}" class="rounded me-4" width="100" height="100">
                                    <div>
                                        <h3 class="font-bold text-xl mb-1">${pharm.name}</h3>
                                        <div class="text-yellow-400 mb-2">
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star-half-alt"></i>
                                            <span class="text-gray-600 text-sm ms-2">(${pharm.avis} avis)</span>
                                        </div>
                                        <p class="text-gray-600 mb-2"><i class="fas fa-map-marker-alt me-2"></i> ${pharm.address}</p>
                                        <p class="text-gray-600 mb-2"><i class="fas fa-phone me-2"></i> ${pharm.phone}</p>
                                        <div class="d-flex flex-wrap gap-2 mt-2">
                                            <span class="badge bg-success"><i class="fas fa-check-circle me-1"></i> Ouvert</span>
                                            <span class="badge bg-info text-dark"><i class="fas fa-clock me-1"></i> Ferme à 20h</span>
                                            <span class="badge bg-primary"><i class="fas fa-calendar-check me-1"></i> Réservation en ligne</span>
                                        </div>
                                        <div class="mt-2">
                                            <span class="badge bg-secondary">${med.name}</span>
                                            <span class="badge bg-light text-dark">${med.description}</span>
                                            <span class="badge bg-light text-dark">${med.molecule}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="d-flex flex-column h-100 justify-content-between">
                                    <div class="text-end">
                                        <span class="availability-badge badge ${pharm.stock <= 2 ? 'bg-warning text-dark' : 'bg-success'}">${pharm.stock <= 2 ? 'Stock faible' : 'En stock'} (${pharm.stock})</span>
                                        <h4 class="text-2xl font-bold text-blue-600 mt-2">${pharm.price} FCFA</h4>
                                    </div>
                                    <div class="d-grid gap-2">
                                        <button class="btn btn-primary reserve-btn"
                                            data-pharmacy="${pharm.name}"
                                            data-price="${pharm.price}"
                                            data-product="${med.name}">
                                            <i class="fas fa-shopping-cart me-2"></i> Réserver
                                        </button>
                                        <button class="btn btn-outline-primary">
                                            <i class="fas fa-directions me-2"></i> Itinéraire
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                // Ajoute la carte avant la pagination
                const pagination = resultsContainer.querySelector('nav');
                resultsContainer.insertBefore(card, pagination);
            });
        });

        // Active les boutons "Réserver"
        activateReserveButtons();
    }

    // Affichage dynamique des médicaments dans la sidebar
    function displaySidebarMedications() {
        // Sélectionne la bonne card-body (celle de la section Médicaments disponibles)
        const sidebarCards = document.querySelectorAll('.col-lg-3 .card .card-body');
        let sidebar = null;
        sidebarCards.forEach(cardBody => {
            if (cardBody.textContent.includes('Médicaments disponibles')) {
                sidebar = cardBody;
            }
        });
        if (!sidebar) return;

        let html = '<h3 class="font-bold text-lg mb-4">Médicaments disponibles</h3>';
        medications.forEach(med => {
            html += `
            <div class="d-flex mb-3">
                <img src="https://via.placeholder.com/80" alt="${med.name}" class="rounded me-3" width="80" height="80">
                <div>
                    <h4 class="font-bold">${med.name}</h4>
                    <p class="text-sm text-gray-600">${med.description}</p>
                    <p class="text-sm">${med.molecule}</p>
                </div>
            </div>
            <hr class="my-3">
            <div class="text-sm mb-3">
                <p class="font-bold">Posologie habituelle :</p>
                <p>${med.posologie || ''}</p>
                <p class="mt-2 text-red-500"><i class="fas fa-exclamation-triangle me-2"></i>${med.max || ''}</p>
            </div>
            `;
        });
        sidebar.innerHTML = html;
    }

    // Active les boutons "Réserver"
    function activateReserveButtons() {
        document.querySelectorAll('.reserve-btn').forEach(button => {
            button.addEventListener('click', function() {
                const pharmacy = this.getAttribute('data-pharmacy');
                const price = parseFloat(this.getAttribute('data-price'));
                const product = this.getAttribute('data-product');
                const patient = JSON.parse(localStorage.getItem('userData') || '{}');

                const reservation = {
                    pharmacy: pharmacy,
                    product: product,
                    price: price,
                    patientName: patient.firstName ? (patient.firstName + ' ' + patient.lastName) : '',
                    patientPhone: patient.phone || '',
                    timestamp: new Date().toLocaleString()
                };

                let reservations = JSON.parse(localStorage.getItem('reservations')) || [];
                reservations.push(reservation);
                localStorage.setItem('reservations', JSON.stringify(reservations));

                const existingItemIndex = cart.findIndex(item => item.pharmacy === pharmacy && item.product === product);

                if (existingItemIndex >= 0) {
                    cart[existingItemIndex].quantity += 1;
                } else {
                    cart.push({ pharmacy, product, price, quantity: 1 });
                }

                updateCart();
            });
        });
    }

    // Mise à jour du panier
    function updateCart() {
        const cartItemsElement = document.getElementById('cartItems');
        cartItemsElement.innerHTML = '';

        let total = 0;

        cart.forEach(item => {
            const itemTotal = item.price * item.quantity;
            total += itemTotal;

            const itemElement = document.createElement('div');
            itemElement.className = 'd-flex justify-content-between align-items-center mb-2';
            itemElement.innerHTML = `
                <div>
                    <h5 class="font-bold">${item.product} - ${item.pharmacy}</h5>
                    <p>${item.price} FCFA x ${item.quantity} = ${itemTotal} FCFA</p>
                </div>
                <div>
                    <button class="btn btn-sm btn-outline-secondary decrease-quantity" data-pharmacy="${item.pharmacy}" data-product="${item.product}">-</button>
                    <button class="btn btn-sm btn-outline-secondary increase-quantity" data-pharmacy="${item.pharmacy}" data-product="${item.product}">+</button>
                </div>
            `;
            cartItemsElement.appendChild(itemElement);
        });

        document.getElementById('cartTotal').textContent = total;

        // Boutons + et -
        document.querySelectorAll('.increase-quantity').forEach(button => {
            button.addEventListener('click', function() {
                const pharmacy = this.getAttribute('data-pharmacy');
                const product = this.getAttribute('data-product');
                const item = cart.find(item => item.pharmacy === pharmacy && item.product === product);
                item.quantity += 1;
                updateCart();
            });
        });

        document.querySelectorAll('.decrease-quantity').forEach(button => {
            button.addEventListener('click', function() {
                const pharmacy = this.getAttribute('data-pharmacy');
                const product = this.getAttribute('data-product');
                const itemIndex = cart.findIndex(item => item.pharmacy === pharmacy && item.product === product);

                if (cart[itemIndex].quantity > 1) {
                    cart[itemIndex].quantity -= 1;
                } else {
                    cart.splice(itemIndex, 1);
                }

                updateCart();
            });
        });
    }

    // Réservation globale
    document.getElementById('makeReservation').addEventListener('click', function() {
        if (cart.length === 0) {
            alert('Votre panier est vide.');
            return;
        }

        alert('Réservation effectuée avec succès! Les pharmacies ont été notifiées.');

        cart.forEach(item => {
            console.log(`Notification envoyée à ${item.pharmacy}: Réservation de ${item.quantity} article(s) de ${item.product}.`);
        });

        cart = [];
        updateCart();
    });

    // Recherche dynamique
    document.querySelector('.form-control').addEventListener('input', function() {
        displayResults(this.value);
    });

    // Initialisation
    displayResults();
    displaySidebarMedications();

    // Optionnel : pré-remplir le champ de recherche si paramètre d'URL
    const urlParams = new URLSearchParams(window.location.search);
    const searchQuery = urlParams.get('q');
    if(searchQuery) {
        document.querySelector('.form-control').value = searchQuery;
        displayResults(searchQuery);
    }
});
</script>
</body>
</html>
